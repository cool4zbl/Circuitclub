{{!-- wrongproblems-list.hbs --}}
{{!< ../layout}}

<style>
  #list-container {
    width: 98%;
  }
  .paper-list {
    height: 100vh;
  }
  .panel ul{
    list-style-type: none;
  }
  .heading {
    margin-bottom: 30px;
    text-align: center;
  }
  .container {
    font-size: 1.1em;
  }
  .back {
    text-align: center;
  }
</style>
<script>
  $(document).ready(function () {
    // 所有题目暂存
    var $probList = $('article.per-prob');
    // 正确显示难易程度
    $('.per-prob').each(function(index, el) {
       var $diff = $(this).find('.difficulty');
       var difNub = $diff.data('id');
        switch(difNub) {
          case 2:
            $diff.text('易');
            break;
          case 5:
            $diff.text('中');
            break;
          case 8:
            $diff.text('难');
            break;
        };
     });
    // 点击后确定功能
    $('.btn-group').on('click', function(event) {
      event.preventDefault();
      var $target = $(event.target);
      var txt = $target.text();

      $(this).find('.selected').text(txt);

      if ($target.is('a')) {
        var type = '' + $target.data('type'); // 不是字符串
        console.log('type', type);
        switch (type) {
          case 'true':
            $probList.filter('.false').hide();
            break;
          case 'wrong':
            $probList.filter('.true').hide();
            break;

        }
      }
    });

  });
</script>
<div id="list-container" class="container">
  <div class="row">
    <div class="col-md-12 heading">
      <h3>我 的 题 库</h3>
      <div class="prob-list-header">
          <div class="btn-group-list">
            <div class="btn-group">
              <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="selected">所有题目</span>
                 <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#" data-type="status">所有题目</a></li>
                <li class="divider"></li>
                <li><a href="#" data-type="true">正确</a></li>
                <li class="divider"></li>
                <li><a href="#" data-type="wrong">错误</a></li>
              </ul>
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="selected">所有难度</span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">所有难度</a></li>
                <li class="divider"></li>
                <li><a href="#">容易</a></li>
                <li class="divider"></li>
                <li><a href="#">中等</a></li>
                <li class="divider"></li>
                <li><a href="#">困难</a></li>
              </ul>
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="selected">所有题型</span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">所有题型</a></li>
                <li class="divider"></li>
                <li><a href="#">选择题</a></li>
                <li class="divider"></li>
                <li><a href="#">填空题</a></li>
                <li class="divider"></li>
                <li><a href="#">计算题</a></li>
                <li class="divider"></li>
                <li><a href="#">问答题</a></li>
              </ul>
            </div>
          </div>
        </div>

    </div>
    <div class="col-md-3">
      <div class="panel panel-info paper-list">
        <div class="panel-heading">
          <h3 class="panel-title">试卷列表</h3>
        </div>
        <div class="panel-body">
          <ul>
            <li>试卷1</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-md-9">

        {{#each userAnsArr}}
          <article class="{{this.status}} panel panel-info per-prob prob-id-{{_id}}" data-id="{{_id}}" data-status="" data-difficulty="{{problem.difficulty}}" data-probtype="{{problem.type}}">
            <input type="hidden" name="problem" value="{{_id}}">
              <section class="prob-info panel-heading">
                <label for="">编号 &nbsp;&nbsp;<span class="prob-index">{{problem.index}}</span> &nbsp;&nbsp; </label>
                <label class="prob-type" for=""> &nbsp;&nbsp;&nbsp;[&nbsp;{{problem.type}}&nbsp;] &nbsp;</label>
                 <label for="time"> <i class="fa fa-clock-o" style="font-size: 1em;"></i> {{moment this.meta.updateAt format="YYYY-MM-DD"}}</label>&nbsp;&nbsp;&nbsp;
                  <i class="fa fa-question-circle" style="font-size: 1em;"></i>&nbsp;&nbsp;<label for="difficulty" class="difficulty" data-id="{{problem.difficulty}}"></label>
                <div class="prob-title">{{problem.title}}</div>

                {{#if problem.a}}
                  <dt>选项</dt>
                  <dd>A. {{problem.a}}</dd>
                  <dd>B. {{problem.b}}</dd>
                  <dd>C. {{problem.c}}</dd>
                  <dd>D. {{problem.d}}</dd>
                {{/if}}
                 <div class="prob-content">{{problem.content}}</div>
               {{#if problem.image.path}}
                <div class="prob-img">
                   <dt> <span class="prob-index">{{problem.index}}</span> 题图</dt>
                   <dd><img src="{{problem.image.path}}" alt="{{problem.index}}图">
                   </dd>
                </div>
                {{/if}}

              </section>

              <section class="ans-info panel-body" >
                <div class="row">
                  <div class="col-lg-6">
                    <div class="input-group ans-content">
                      <span class="input-group-addon">你的回答：</span>
                      <input type="text" class="form-control std-ans" placeholder="{{this.content}}" name="answer" value="{{this.content}}" readonly>
                    </div><!-- /input-group -->
                  </div><!-- /.col-lg-6 -->
                  <div class="col-lg-2">

                    {{#if this.status}}
                        <i class="fa fa-check-circle ans-check-right"></i>
                    {{else}}
                        <i class="fa fa-times-circle ans-check-wrong"></i>
                    {{/if}}
                  </div>
                   <div class="col-lg-4">
                    <div class="input-group true-ans">
                      <p> 正确答案:
                      <span>{{this.problem.answer}}</span>
                      </p>
                    </div><!-- /input-group -->
                  </div><!-- /.col-lg-6 -->
                </div><!-- /.row -->
                <div class="row prob-detail">
                  <p class="analysis">{{problem.analysis}}</p>
                </div>

              </section>
              <hr>
            </article>

        {{/each}}
    </div>
    {{!-- <table id="dataTable" class="table table-hover table-bordered">
      <thead>
        <tr>
          <th>习题编号</th>
          <th>章节</th>
          <th>类型</th>
          <th>题目内容</th>

          <th>保存时间</th>
          <th>详细</th>
          <th>编辑</th>
          <th>删除</th>
        </tr>
      </thead>
      <tbody>

        {{#each userAnsArr}}

          <tr class="prob-id-{{problem._id}}">
            <td>{{problem.problem.index}}</td>
            <td>{{problem.problem.chapter}}</td>
            <td>{{problem.problem.type}}</td>
            <td>{{problem.problem.title}}</td>
            <td></td>
            <td><a href="/std/myproblems/list/" data-id="{{problem._id}}" role="button" class="btn btn-primary detail">查看</a> </td>
            <td><a href="/admin/problem/preview/{{_id}}" role="button" class="btn btn-info">编辑</a> </td>
            <td><a href="/admin/problem/preview/{{_id}}" role="button" class="btn btn-danger del" data-target="#delModal">删除</a> </td>

          </tr>
        {{/each}}
      </tbody>
    </table> --}}
    </div>
    <hr>
    <div class="col-md-12 back center">
    <a href="/std/home">
       <button class="btn btn-primary">返 回 主 页</button>
    </a>
    </div>
  </div>
</div>

<div id="delModal" tabindex="-1" role="dialog" aria-labelledby="
myModalLabel" aria-hidden="true" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">确认删除？</h4>
      </div>
      <div class="modal-body">
        <p>删除后无法恢复</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-danger del">删除</button>
      </div>
    </div><!-- /.modal-content -->
  </div>
</div>


